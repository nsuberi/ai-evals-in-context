{% extends "narrative/base_narrative.html" %}

{% block title %}Phase 3: Building with AI - AI Testing Resource{% endblock %}

{% block phase_intro %}
{% if intro_content %}
<section class="phase-intro">
  <div class="phase-intro__content">
    {{ intro_content | safe }}
  </div>
</section>
{% else %}
<section class="phase-intro">
  <div class="phase-intro__content">
    <p>In this phase, we establish a common language of test types. Each type plays a distinct role in validating quality for AI features.</p>
  </div>
</section>
{% endif %}
{% endblock %}

{% block phase_content %}
<!-- AI Evaluation Educational Banner -->
<div class="narrative-content">
  <div class="ai-eval-banner">
    <h2 class="ai-eval-banner__title">
      <span class="ai-eval-banner__title-badge">AI</span>
      Understanding AI Evaluation vs Traditional Testing
    </h2>
    <div class="ai-eval-banner__grid">
      <div class="ai-eval-banner__concept">
        <div class="ai-eval-banner__concept-header">
          <span class="ai-eval-banner__concept-icon">?</span>
          <span class="ai-eval-banner__concept-title">Unique to AI</span>
        </div>
        <p class="ai-eval-banner__concept-desc">AI tests are flaky by default; the same input can produce different outputs. This requires new approaches beyond traditional pass/fail testing.</p>
      </div>
      <div class="ai-eval-banner__concept">
        <div class="ai-eval-banner__concept-header">
          <span class="ai-eval-banner__concept-icon">H</span>
          <span class="ai-eval-banner__concept-title">Human in the Loop</span>
        </div>
        <p class="ai-eval-banner__concept-desc">SMEs validate what "good" means; automated tests catch regressions. Human judgment defines quality criteria.</p>
      </div>
      <div class="ai-eval-banner__concept">
        <div class="ai-eval-banner__concept-header">
          <span class="ai-eval-banner__concept-icon">B</span>
          <span class="ai-eval-banner__concept-title">Business Owns Risk</span>
        </div>
        <p class="ai-eval-banner__concept-desc">Business defines acceptable thresholds and owns risk decisions. 95% accuracy may be fine for suggestions, not for medical advice.</p>
      </div>
      <div class="ai-eval-banner__concept">
        <div class="ai-eval-banner__concept-header">
          <span class="ai-eval-banner__concept-icon">C</span>
          <span class="ai-eval-banner__concept-title">Continuous Improvement</span>
        </div>
        <p class="ai-eval-banner__concept-desc">Deploy, observe, annotate, improve, repeat. AI systems require ongoing evaluation and refinement cycles.</p>
      </div>
    </div>
  </div>
</div>

<!-- Responsibility Note -->
<div class="narrative-content" style="padding-top: 0; padding-bottom: 0;">
  <div class="test-responsibility-note">
    Governance teams don't review test implementation details&mdash;that's the builder's professional obligation.
    The exception is acceptance tests: business users who own the risk need to understand and validate
    the acceptance testing approach.
  </div>
</div>

<!-- Core Statement -->
<p class="test-type-card__statement">
  AI evaluation is acceptance testing linked to business value.
</p>

<!-- Test Type Cards Grid -->
<div class="test-type-cards">
  <!-- AI Acceptance Tests (first, prominent) -->
  {% if all_type_explanations.get('ai_acceptance') %}
  <div class="test-type-card test-type-card--ai">
    <div class="test-type-card__header">
      <h3 class="test-type-card__title">AI Acceptance Testing</h3>
      <span class="test-type-card__badge">AI</span>
      <span class="test-type-card__badge test-type-card__badge--business">Business-Facing</span>
    </div>
    <div class="test-type-card__content">
      {{ all_type_explanations['ai_acceptance'].content | safe }}
    </div>
    {% if all_type_explanations['ai_acceptance'].relationship_to_ai %}
    <div class="test-type-card__ai-relationship">
      <div class="test-type-card__ai-label">Relationship to AI</div>
      <div class="test-type-card__ai-text">{{ all_type_explanations['ai_acceptance'].relationship_to_ai | safe }}</div>
    </div>
    {% endif %}
  </div>
  {% endif %}

  <!-- AI Evals -->
  {% if all_type_explanations.get('evals') %}
  <div class="test-type-card test-type-card--ai">
    <div class="test-type-card__header">
      <h3 class="test-type-card__title">AI Evals</h3>
      <span class="test-type-card__badge">AI</span>
      <span class="test-type-card__badge test-type-card__badge--business">Business-Facing</span>
    </div>
    <div class="test-type-card__content">
      {{ all_type_explanations['evals'].content | safe }}
    </div>
    {% if all_type_explanations['evals'].relationship_to_ai %}
    <div class="test-type-card__ai-relationship">
      <div class="test-type-card__ai-label">Relationship to AI</div>
      <div class="test-type-card__ai-text">{{ all_type_explanations['evals'].relationship_to_ai | safe }}</div>
    </div>
    {% endif %}
  </div>
  {% endif %}

  <!-- Traditional Test Types -->
  {% for type in test_types %}
  {% if type.id not in ['evals'] %}
  {% set expl = all_type_explanations.get(type.id) %}
  {% if expl %}
  <div class="test-type-card">
    <div class="test-type-card__header">
      <h3 class="test-type-card__title">{{ expl.title }}</h3>
      {% if type.id in business_facing_types %}
      <span class="test-type-card__badge test-type-card__badge--business">Business-Facing</span>
      {% else %}
      <span class="test-type-card__badge test-type-card__badge--builder">Builder</span>
      {% endif %}
    </div>
    <div class="test-type-card__content">
      {{ expl.content | safe }}
    </div>
    {% if expl.relationship_to_ai %}
    <div class="test-type-card__ai-relationship">
      <div class="test-type-card__ai-label">Relationship to AI</div>
      <div class="test-type-card__ai-text">{{ expl.relationship_to_ai | safe }}</div>
    </div>
    {% endif %}
  </div>
  {% endif %}
  {% endif %}
  {% endfor %}
</div>
{% endblock %}
